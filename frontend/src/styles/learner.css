

/* =========================
   Base
   ========================= */
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: var(--bg); color: var(--text); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
a { color: inherit; text-decoration: none; }
button { font-family: inherit; cursor: pointer; }

/* =========================
   Page container and header
   ========================= */
.learner-page {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

/* Header row */
.header-row { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:12px; }
.badge { display:inline-block; padding:6px 10px; border-radius:999px; font-size:12px; font-weight:700; background:#eef2ff; color:#3730a3; border:1px solid var(--border); }

/* Toolbar buttons */
.toolbar { display:flex; gap:12px; align-items:center; margin-bottom:12px; }
.btn-primary { background: linear-gradient(90deg,var(--primary),var(--accent)); color:#fff; border:0; padding:10px 14px; border-radius:10px; font-weight:600; box-shadow: 0 8px 20px rgba(79,70,229,0.12); }
.btn-ghost { background: var(--card-bg); border:1px solid var(--border); padding:8px 12px; border-radius:10px; color:var(--text); }
/* Optional: style for the toggle button */
.btn-secondary {
  background:#fff; border:1px solid var(--border); padding:8px 12px; border-radius:8px; color:var(--text);
}

/* =========================
   Two-column detail layout
   ========================= */
.detail-layout {
  display: flex;
  gap: 20px;
  align-items: stretch; /* ensure equal height columns */
  min-height: 320px;
}

/* Panels share base styles */
.panel {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0; /* important for child overflow to work */
}

/* Left and right widths */
.left-panel { flex: 1 1 60%; min-width: 360px; max-width: 100%; }
.right-panel { flex: 1 1 40%; min-width: 300px; max-width: 100%; }

/* Each panel's scroll area */
.left-panel, .right-panel {
  /* limit height so page doesn't grow; allow internal scroll */
  max-height: var(--page-max-height);
  overflow: hidden; /* children will scroll */
}

/* Inner scroll containers (used where content can be long) */
.left-panel .panel-scroll,
.right-panel .panel-scroll {
  overflow-y: auto;
  padding-right: 8px;
  min-height: 0; /* critical for flex children */
  max-height: 100%;
  word-break: break-word;
}

/* =========================
   Submission card and info
   ========================= */
.submission-card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 12px;
  box-shadow: var(--shadow-sm);
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 80px;
}

.submission-header { display:flex; justify-content:space-between; align-items:center; gap:12px; }
.submission-title { margin:0; font-size:16px; font-weight:700; color:var(--text); }
.submission-body { display:flex; flex-direction:column; gap:12px; }

/* Audio preview */
.result-audio audio { width:100%; border-radius:8px; }

/* Info card */
.info-card h3 { margin-top:0; }
.info-card .btn-primary { margin-top:12px; }

/* Empty state */
.empty-state { padding:12px; border-radius:8px; background: linear-gradient(180deg,#fff,#fbfdff); border:1px dashed var(--border); color:var(--muted); text-align:center; }

/* =========================
   History grid inside right panel
   ========================= */
.submissions-grid {
  display: grid;
  grid-template-columns: 1fr; /* vertical list by default */
  gap: 12px;
}

/* History item compact */
.submission-card .meta { display:flex; gap:8px; align-items:center; color:var(--muted); font-size:13px; }
.meta strong { color:var(--text); font-weight:600; }
.meta-sep { opacity:0.6; }

/* Status pills */
.status-pill {
  display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-weight:600; font-size:13px; border:1px solid var(--border); background:#fff; color:var(--text);
}
.status-pill.success { background: #ecfdf5; color: #065f46; border-color: #a7f3d0; }
.status-pill.pending { background: #fffbeb; color: #92400e; border-color: #fde68a; }
.status-pill.danger { background: #fff1f2; color: #991b1b; border-color: #fecaca; }

/* =========================
   Interactive transcript and audio in left panel
   ========================= */
.transcript-words-container { max-height: 44vh; overflow-y: auto; padding-right: 8px; }
.transcript-words { display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-top:6px; }
.transcript-words span {
  display:inline-block;
  padding:6px 8px;
  border-radius:8px;
  font-weight:600;
  font-size:14px;
  border-bottom: 1px dotted rgba(15,23,42,0.08);
  cursor:pointer;
  transition: background .12s ease, transform .08s ease;
  user-select:none;
  word-break: break-word;
  white-space: normal;
}
.transcript-words span:hover { background:#f1f5f9; transform:translateY(-1px); }
.transcript-words .correct { color: var(--success); background: rgba(16,185,129,0.06); border:1px solid rgba(16,185,129,0.08); }
.transcript-words .wrong { color: var(--danger); background: rgba(239,68,68,0.06); border:1px solid rgba(239,68,68,0.08); }

/* Score grid */
.score-grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:8px; margin-top:8px; }
.score-grid .label { font-size:12px; color:var(--muted); font-weight:700; }
.score-grid .value { font-size:16px; color:var(--text); font-weight:700; margin-top:4px; }

/* Help text */
.help-text { font-size:13px; color:var(--muted); margin-top:8px; }

/* =========================
   Buttons, submit and small utilities
   ========================= */
.btn-submit { display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:10px; border:none; background:var(--primary); color:#fff; font-weight:700; }
.btn-submit.is-disabled { opacity:0.6; cursor:not-allowed; box-shadow:none; }
.spinner { width:16px; height:16px; border-radius:50%; border:2px solid rgba(255,255,255,0.6); border-top-color:#fff; animation:spin .8s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.icon-send { font-size:14px; transform:translateY(1px); }

/* Status rows */
.status-row { padding:10px; border-radius:8px; font-size:14px; }
.status-row.success { background:#ecfdf5; color:#065f46; border:1px solid #a7f3d0; }
.status-row.error { background:#fff1f2; color:#991b1b; border:1px solid #fecaca; }

/* =========================
   Accessibility and focus
   ========================= */
button:focus, a:focus, input:focus, textarea:focus { outline: 3px solid rgba(79,70,229,0.12); outline-offset: 2px; border-radius:6px; }
.transcript-words span:focus { outline: 2px solid rgba(79,70,229,0.12); outline-offset: 2px; }

/* =========================
   Responsive
   ========================= */
@media (max-width: 920px) {
  .detail-layout { flex-direction: column; gap:12px; }
  .left-panel, .right-panel { min-width: auto; max-width: 100%; }
  .left-panel .panel-scroll, .right-panel .panel-scroll { max-height: 50vh; }
  .transcript-words-container { max-height: 30vh; }
  .score-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 480px) {
  .submission-card { padding:10px; }
  .transcript-words span { font-size:13px; padding:6px 6px; }
}
/* src/styles/learner.css */

/* Panel phải: thanh cuộn khi lịch sử dài */
.scrollable-history {
  max-height: calc(100vh - 220px);
  overflow-y: auto;
  padding-right: 6px;
}

/* Khu vực transcript dài có thanh cuộn */
.transcript-scroll {
  max-height: 260px;
  overflow-y: auto;
  border: 1px solid #eef2f6;
  border-radius: 6px;
  padding: 8px;
  background: #fafbfc;
}

.transcript-words {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  line-height: 1.8;
  margin-top: 6px;
}
.transcript-words .correct {
  color: #0a7a43;
  background: #e6f5ed;
  padding: 2px 6px;
  border-radius: 4px;
  cursor: pointer;
}
.transcript-words .wrong {
  color: #b00020;
  background: #fdeaea;
  padding: 2px 6px;
  border-radius: 4px;
  cursor: pointer;
}

/* Trạng thái pending */
.pending-box {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: #6b7280;
  background: #f9fafb;
  border: 1px dashed #e5e7eb;
  border-radius: 6px;
  padding: 8px 10px;
}

/* Toolbar icon-only button */
.icon-only {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  padding: 0;
  border-radius: 6px;
}
.icon-only svg {
  width: 18px;
  height: 18px;
}
.token {
  display: inline-block;
  padding: 6px 8px;
  border-radius: 6px;
  font-weight: 600;
  font-size: 14px;
  cursor: pointer;
  transition: background .12s ease, transform .08s ease;
  user-select: none;
  border: 1px solid transparent;
}

.token:hover {
  background: #f1f5f9;
  transform: translateY(-1px);
}

.token-ok {
  color: var(--success);
  background: rgba(16,185,129,0.06);
  border-color: rgba(16,185,129,0.12);
}

.token-bad {
  color: var(--danger);
  background: rgba(239,68,68,0.06);
  border-color: rgba(239,68,68,0.12);
}

/* Focus accessibility */
.token:focus {
  outline: 2px solid rgba(79,70,229,0.12);
  outline-offset: 2px;
}
.segment-block { border: 1px solid #eef2f6; border-radius: 8px; padding: 10px; margin-bottom: 10px; background: #fff; }
.segment-header { display:flex; align-items:center; gap:8px; margin-bottom:6px; }
.segment-play { display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:8px; border:1px solid var(--border); background:#fff; color:var(--text); }
.segment-pill { display:inline-flex; align-items:center; padding:4px 8px; border-radius:999px; font-size:12px; background:#fffbeb; color:#92400e; border:1px solid #fde68a; }
.segment-nonenglish { border-color: #fde68a; background: #fffaf0; }

.token-nonenglish { background: #fff7d6; border-color: #facc15; color: #92400e; }
/* Thanh cuộn cho phần chi tiết nộp bài */
.scrollable-submission {
  max-height: 600px; /* chỉnh theo layout */
  overflow-y: auto;
  padding-right: 8px;
}

/* Khu transcript text fallback khi không có segments/word_analysis */
.transcript-text-fallback {
  background: #f9f9f9;
  padding: 12px;
  border-radius: 6px;
  font-size: 15px;
  line-height: 1.6;
}

/* Đã có sẵn transcript-scroll, token styles trong dự án; nếu chưa, thêm: */
.transcript-scroll {
  max-height: 420px;
  overflow-y: auto;
  padding: 8px 4px;
  border: 1px solid #eef2f6;
  border-radius: 6px;
}

.token {
  margin: 0 3px 6px 0;
  padding: 2px 6px;
  border-radius: 4px;
  border: 1px solid transparent;
  background: #f3f6fb;
  cursor: pointer;
}
.token-ok { border-color: #dbe7ff; }
.token-bad { background: #ffe9e9; border-color: #ffb4b4; }
.token-nonenglish { background: #fff5cc; border-color: #ffd966; }

.segment-block {
  margin-bottom: 10px;
  padding: 8px;
  border-radius: 6px;
  background: #fafbfc;
  border: 1px solid #eef2f6;
}
.segment-nonenglish { background: #fffaf0; }

.segment-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}
.segment-play {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 4px;
  background: #eaf2ff;
  border: 1px solid #cfe1ff;
  cursor: pointer;
}
.segment-pill {
  font-size: 12px;
  color: #9a6700;
}

/* Widen only when submission detail is open */
.left-panel.wide-submission {
  flex: 1 1 75%; /* tăng bề ngang panel trái */
  min-width: 0;
}

/* Keep right panel reasonable width */
.right-panel {
  flex: 1 1 25%;
  min-width: 300px;
}

/* Ensure width applies cleanly even if a grid is used */
.detail-layout .left-panel.wide-submission {
  width: auto;
}
